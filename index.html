<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Spinning Heart</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: radial-gradient(circle, #ffdde1, #ee9ca7);
        overflow: hidden;
    }
    canvas {
        background: transparent;
    }
</style>
</head>
<body>

<canvas id="heart3d" width="600" height="600"></canvas>

<script>
// ----------------- SETUP -----------------
const canvas = document.getElementById("heart3d");
const ctx = canvas.getContext("2d");
const W = canvas.width;
const H = canvas.height;

let angle = 0;

// 3D rotation
function rotate(x, y, z, ax, ay) {

    // rotate around Y axis
    let cosY = Math.cos(ay);
    let sinY = Math.sin(ay);
    let dx = x * cosY - z * sinY;
    let dz = x * sinY + z * cosY;

    // rotate around X axis
    let cosX = Math.cos(ax);
    let sinX = Math.sin(ax);
    let dy = y * cosX - dz * sinX;
    let dz2 = y * sinX + dz * cosX;

    return [dx, dy, dz2];
}

// project 3D â†’ 2D
function project(x, y, z) {
    const scale = 200 / (z + 600); // perspective
    return [
        x * scale + W / 2,
        y * scale + H / 2
    ];
}

// heart surface equation
function heartSurface(u, v) {
    // 3D parametric heart
    let x = 16 * Math.pow(Math.sin(u), 3);
    let y = 13 * Math.cos(u) - 5 * Math.cos(2*u) - 2*Math.cos(3*u) - Math.cos(4*u);
    let z = v; // thickness
    return [x * 10, -y * 10, z * 10];
}

// ----------------- DRAW LOOP -----------------
function draw() {
    ctx.clearRect(0, 0, W, H);

    let ax = angle * 0.7;  // X rotation
    let ay = angle;        // Y rotation
    angle += 0.02;

    for (let v = -2; v <= 2; v += 0.05) {
        for (let u = 0; u < Math.PI * 2; u += 0.05) {

            let [x, y, z] = heartSurface(u, v);
            [x, y, z] = rotate(x, y, z, ax, ay);

            let [px, py] = project(x, y, z);

            ctx.fillStyle = `hsl(${(u / (Math.PI*2)) * 360}, 80%, 60%)`;
            ctx.fillRect(px, py, 2, 2);
        }
    }

    requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
